# ╔══════════════════════════════════════════════════════════════════╗
# ║  Storno.ro — Environment Configuration                        ║
# ╚══════════════════════════════════════════════════════════════════╝
#
# Copy this file to .env and fill in the values.
# Generate secrets with: openssl rand -hex 32

# ── App ────────────────────────────────────────────────────────────
APP_SECRET=CHANGE_ME_RUN_openssl_rand_hex_32
JWT_PASSPHRASE=CHANGE_ME_RUN_openssl_rand_hex_32

# ── Ports ────────────────────────────────────────────────────────
BACKEND_PORT=8900
FRONTEND_PORT=8901
CENTRIFUGO_PORT=8445

# ── Database ───────────────────────────────────────────────────────
# If you use the built-in MySQL container (--profile local-db), only set the
# MYSQL_* variables below. DATABASE_URL will default to the container automatically.
#
# To use an external database instead, uncomment and set DATABASE_URL:
# DATABASE_URL=mysql://storno:PASSWORD@your-db-host:3306/storno?serverVersion=8.0&charset=utf8mb4

# Local MySQL container credentials
MYSQL_ROOT_PASSWORD=CHANGE_ME
MYSQL_DATABASE=storno
MYSQL_USER=storno
MYSQL_PASSWORD=CHANGE_ME

# ── URLs ─────────────────────────────────────────────────────────
# The public URL where users access the frontend
FRONTEND_URL=https://app.storno.ro

# How the frontend reaches the backend API (from browser)
PUBLIC_API_BASE=https://api.storno.ro

# CORS — domains allowed to call the API
CORS_ALLOW_ORIGIN=^https://((app|api|www)\.)?storno\.ro$

# ── Centrifugo (WebSockets) ───────────────────────────────────────
CENTRIFUGO_API_KEY=CHANGE_ME_RUN_openssl_rand_hex_32
CENTRIFUGO_TOKEN_HMAC_SECRET=CHANGE_ME_RUN_openssl_rand_hex_32
CENTRIFUGO_ADMIN_PASSWORD=CHANGE_ME
PUBLIC_CENTRIFUGO_WS=wss://app.storno.ro/connection/websocket
CENTRIFUGO_ALLOWED_ORIGINS=https://app.storno.ro

# ── Email (optional) ──────────────────────────────────────────────
# SMTP example: smtp://user:pass@smtp.example.com:587
# AWS SES:      ses://ACCESS_KEY:SECRET_KEY@default?region=eu-west-1
MAILER_DSN=null://null
MAIL_FROM=noreply@storno.ro

# ── AWS S3 Storage ───────────────────────────────────────────────
AWS_S3_BUCKET=storno-documents
AWS_DEFAULT_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# ── Storage Encryption (for user-configurable storage) ──────────
STORAGE_ENCRYPTION_KEY=CHANGE_ME_RUN_openssl_rand_hex_32

# ── Stripe (optional) ────────────────────────────────────────────
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_CONNECT_WEBHOOK_SECRET=

# ── License (self-hosted) ─────────────────────────────────────────
# Empty     = Community Edition (Starter features, free forever)
# Hex key   = Phone-home license (validates against app.storno.ro)
# JWT token = Offline license (no network calls, RS256-signed)
# Get your license key from https://app.storno.ro/settings/billing
LICENSE_KEY=

# ── ANAF OAuth (e-Factura) ───────────────────────────────────────
OAUTH_ANAF_CLIENT_ID=
OAUTH_ANAF_CLIENT_SECRET=

# ── Registration ────────────────────────────────────────────────────
# Set to 0 to temporarily disable new user registration
REGISTRATION_ENABLED=1

# ── Cloudflare Turnstile (captcha) ──────────────────────────────────
TURNSTILE_SECRET_KEY=
TURNSTILE_SITE_KEY=
